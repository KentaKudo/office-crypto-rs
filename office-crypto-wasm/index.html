<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
  </head>

  <body>
    <form name="myform">
      <input name="myfile" type="file" />
    </form>
    <script type="module">
      var form = document.forms.myform;

      form.myfile.addEventListener("change", function (e) {
        const f_reader = new FileReader();

        f_reader.onload = (event) => {
          const buf = event.target.result;
          import("./dist/web")
            .then((w) => w.decrypt(buf, "test"))
            .then(console.log);
        };

        f_reader.readAsArrayBuffer(e.target.files[0]);
      });
    </script>
  </body>
</html>
